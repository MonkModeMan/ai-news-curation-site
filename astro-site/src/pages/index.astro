---
// src/pages/index.astro
import Layout from "../layouts/Layout.astro";
import { ArticleList } from "../components/ArticleList.jsx";  // ✅ React Islandの読み込み

// 不要になった処理（getCollection や filter 処理）は削除
const currentPage = 1;
const totalPages = 1;
const sort = "date";

// クエリ保持のためだけに取得（表示上は維持）
const q = Astro.url?.searchParams.get("q")?.toLowerCase().trim() ?? "";
const media = Astro.url?.searchParams.get("media")?.toLowerCase().replace(/\s+/g, "").trim() ?? "";
---

<!-- ✅ 検索中オーバーレイ（JSX側でも制御されるが、初期非表示用）-->
<div id="search-overlay"
    class="fixed inset-0 z-50 bg-white/80 backdrop-blur-sm flex items-center justify-center text-xl font-bold text-red-600"
    style="display: none;"
>
  🔍 検索中です… 少々お待ちください
</div>

<!-- ✅ ヘッダー直下にページインジケータ表示 -->
<div class="w-full flex justify-center items-center text-sm text-gray-600 mt-2 sm:mt-0 sm:absolute sm:top-4 sm:right-4 sm:w-auto">
  <div class="text-sm text-gray-700">
    ページ {currentPage} / 全{totalPages}ページ → <a href="#" class="text-blue-600 underline">次のページ</a>
  </div>
</div>

<Layout currentPage={currentPage} totalPages={totalPages} sort={sort} q={q} media={media}>
  <!-- ✅ JSXベースの記事一覧コンポーネント -->
  <ArticleList client:load />
</Layout>

<!-- ✅ フッター下にページTOPリンクを追加 -->
<div class="mt-4 w-full flex justify-center">
  <a href="#" class="text-blue-600 underline">ページTOPへ</a>
</div>
